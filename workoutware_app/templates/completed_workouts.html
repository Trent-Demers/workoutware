{% load static %}
<!DOCTYPE html>
<!--
    Template: Completed Workouts List

    Purpose:
    - Display all completed, non-template workout sessions for the logged-in user.
    - Give quick access to:
        • Navigate back to main dashboard
        • Log a new workout
        • View/review details of a past workout
        • Delete a completed workout

    Context variables expected:
    - sessions: iterable of WorkoutSession objects where:
        • session_name: name/title of the workout
        • session_date: date of the workout
        • start_time: optional start time
        • duration_minutes: optional duration in minutes
        • session_id: primary key used in URLs
-->

<!DOCTYPE html>
<html>
 <head>
  <link href="{% static 'stylesheets/workoutware.css' %}" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  {% load static %}
  <title>
   Completed Workouts
  </title>
  <style> 
   .workout-list {
    padding: 0;
    margin-top: 20px;
   }
   .workout-item {
    background: var(--bg-card);
    padding: 20px 25px;
    border-radius: 12px;
    margin-bottom: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 15px;
    border: 1px solid var(--border-color);
    transition: var(--transition-normal);
   }
   .workout-item:hover {
    transform: translateX(5px);
    box-shadow: var(--shadow-md);
   }
   .status-pill {
    background: rgba(0, 184, 148, 0.2);
    color: var(--success);
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.85em;
    margin-left: 10px;
   }
   .btn-view {
    background: var(--primary);
    color: white;
    padding: 10px 20px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    transition: var(--transition-normal);
   }
   .btn-view:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
   }
   .btn-delete-workout {
    background: rgba(255, 107, 107, 0.2);
    color: var(--danger);
    padding: 10px 20px;
    border-radius: 8px;
    border: 1px solid var(--danger);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-normal);
   }   
   .btn-delete-workout:hover {
    background: var(--danger);
    color: white;
    transform: translateY(-2px);
   }
  </style>
 </head>
 <body>
 <div class="container-wrapper">
  <h1 class="fade-in">
   <i class="fas fa-check-circle"></i> All Completed Workouts
  </h1>
  <div class="nav-links fade-in">
   <a href="{% url 'home' %}">
    <i class="fas fa-arrow-left"></i> Back to Dashboard
   </a>
   <a href="{% url 'log_workout' %}">
    <i class="fas fa-dumbbell"></i> Log Workout
   </a>
  </div>
  <p class="fade-in" style="margin-top: 15px; color: var(--text-muted);">
   <i class="fas fa-info-circle"></i> These are your past completed, non-template workout sessions.
  </p>
  {% if sessions %}
  <ul class="workout-list">
   {% for session in sessions %}
   <li class="workout-item fade-in">
    <div class="workout-info">
     <strong>
      <i class="fas fa-dumbbell"></i> {{ session.session_name }}
     </strong>
     <span class="status-pill">
      <i class="fas fa-check"></i> Completed
     </span>
     <br/>
     <span style="color: var(--text-muted);">
      <i class="far fa-calendar"></i> {{ session.session_date|date:"M d, Y" }}
                            {% if session.start_time %}
                                <i class="far fa-clock"></i> {{ session.start_time|time:"g:i A" }}
                            {% endif %}
                            {% if session.duration_minutes %}
                                <i class="fas fa-stopwatch"></i> {{ session.duration_minutes }} min
                            {% endif %}
     </span>
    </div>
    <div class="workout-actions">
     <a class="btn-view" href="{% url 'add_exercises_to_session' session.session_id %}">
      <i class="fas fa-eye"></i> View Details
     </a>
     <form action="{% url 'delete_workout' session.session_id %}"
           method="post"
           style="display:inline;"
           onsubmit="return confirm('Delete this workout? This cannot be undone.');">
      {% csrf_token %}
      <button type="submit" class="btn-delete-workout">
       <i class="fas fa-trash"></i> Delete
      </button>
     </form>
    </div>
   </li>
   {% endfor %}
  </ul>
  {% else %}
  <div class="empty-state fade-in">
   <i class="fas fa-clipboard-list"></i>
   <p>No completed workouts yet. Go crush a workout!</p>
   <a href="{% url 'log_workout' %}" class="btn">
    <i class="fas fa-play"></i> Start Workout
   </a>
  </div>
  {% endif %}
  </div>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="/static/stylesheets/workoutware.css">
    <title>Set Logged</title>
    <style>
        .validation-box {
            padding: 25px;
            margin: 20px 0;
            border-radius: 10px;
            font-size: 1.3em;
            font-weight: bold;
        }
        .flag-outlier { 
            background-color: #ffebee; 
            border-left: 8px solid #f44336; 
            color: #c62828;
        }
        .flag-new_pr { 
            background-color: #e8f5e9; 
            border-left: 8px solid #4caf50; 
            color: #2e7d32;
        }
        .flag-normal { 
            background-color: #e3f2fd; 
            border-left: 8px solid #2196f3; 
            color: #1565c0;
        }
        .flag-suspicious_low { 
            background-color: #fff3e0; 
            border-left: 8px solid #ff9800; 
            color: #e65100;
        }
        .flag-first_time {
            background-color: #f3e5f5;
            border-left: 8px solid #9c27b0;
            color: #6a1b9a;
        }
        .pr-celebration {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            border: 4px solid #ff6f00;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .pr-celebration h2 {
            font-size: 2.5em;
            margin: 0;
            color: #d84315;
        }
        .pr-celebration p {
            font-size: 1.3em;
            margin: 10px 0;
            color: #333;
        }
        .set-details {
            padding: 20px;
            background-color: #f5f5f5;
            border-radius: 5px;
            margin: 20px 0;
        }
        .btn-back {
            display: inline-block;
            padding: 12px 24px;
            background-color: #2196f3;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            margin-top: 20px;
        }
        .btn-back:hover {
            background-color: #1976d2;
        }
        .demo-note {
            background-color: #fff9c4;
            border-left: 4px solid #fbc02d;
            padding: 15px;
            margin-top: 30px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>‚úî Set Logged Successfully!</h1>
    
    {% if is_pr %}
    <div class="pr-celebration">
        <h2>üéâ NEW PERSONAL RECORD! üéâ</h2>
        <p><strong>{{ exercise_name }}</strong></p>
        <p style="font-size: 2em;">{{ set.weight }} lbs √ó {{ set.reps }} reps</p>
        {% if previous_pr %}
            <p>Previous PR: {{ previous_pr }} lbs</p>
            <p style="color: #4caf50; font-weight: bold;">
                +{{ set.weight|floatformat:1|add:"-"|add:previous_pr|floatformat:1 }} lbs improvement!
            </p>
        {% else %}
            <p>First PR for this exercise!</p>
        {% endif %}
    </div>
    {% endif %}
    
    <div class="validation-box flag-{{ validation.flag }}">
        {{ validation.message }}
    </div>
    
    <div class="set-details">
        <h3>Set Details:</h3>
        <p><strong>Exercise:</strong> {{ exercise_name }}</p>
        <p><strong>Weight:</strong> {% if set.weight %}{{ set.weight }} lbs{% else %}Bodyweight{% endif %}</p>
        <p><strong>Reps:</strong> {{ set.reps }}</p>
        <p><strong>RPE:</strong> {{ set.rpe }}/10</p>
        <p><strong>Set Number:</strong> {{ set.set_number }}</p>
    </div>
    
    <a href="{% url 'add_exercises_to_session' session_id %}" class="btn-back">‚Üê Back to Workout</a>
    
    <div class="demo-note">
        <p><strong>üí° Smart Validation & PR Tracking:</strong></p>
        <p>This system automatically validates workout data and tracks personal records!</p>
        <ul>
            <li>üéâ <strong>New PR:</strong> Celebrates when you beat your previous max</li>
            <li>‚ö†Ô∏è <strong>Outlier:</strong> Flags unrealistic jumps (>15% increase)</li>
            <li>‚ö†Ô∏è <strong>Suspicious Low:</strong> Catches potential typos (>30% below average)</li>
            <li>‚úì <strong>Normal:</strong> Confirms data is within expected range</li>
        </ul>
    </div>
</body>
</html>